<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Sentinel系列之起源 | Rocky for Everything</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.什么是Sentinel i.分布式系统的流量防卫兵；ii.微服务架构中，服务与服务之间的稳定性变得越来越重要。Sentinel以流量为切入点，从流控，熔断，降级，系统负载保护等多个维度来提供服务稳定性支持；iii.轻量级。  2.Sentinel功能 i.流控，针对秒杀环境，对于突发流量可以控制在系统承受范围内；ii.削峰填谷;iii.实时熔断下游不可用应用;iv.完备的监控功能:提供实时的监">
<meta name="keywords" content="Sentinel系列">
<meta property="og:type" content="article">
<meta property="og:title" content="Sentinel系列之起源">
<meta property="og:url" content="http://yoursite.com/2018/08/28/Sentinel系列之起源/index.html">
<meta property="og:site_name" content="Rocky for Everything">
<meta property="og:description" content="1.什么是Sentinel i.分布式系统的流量防卫兵；ii.微服务架构中，服务与服务之间的稳定性变得越来越重要。Sentinel以流量为切入点，从流控，熔断，降级，系统负载保护等多个维度来提供服务稳定性支持；iii.轻量级。  2.Sentinel功能 i.流控，针对秒杀环境，对于突发流量可以控制在系统承受范围内；ii.削峰填谷;iii.实时熔断下游不可用应用;iv.完备的监控功能:提供实时的监">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-08-28T03:02:44.482Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sentinel系列之起源">
<meta name="twitter:description" content="1.什么是Sentinel i.分布式系统的流量防卫兵；ii.微服务架构中，服务与服务之间的稳定性变得越来越重要。Sentinel以流量为切入点，从流控，熔断，降级，系统负载保护等多个维度来提供服务稳定性支持；iii.轻量级。  2.Sentinel功能 i.流控，针对秒杀环境，对于突发流量可以控制在系统承受范围内；ii.削峰填谷;iii.实时熔断下游不可用应用;iv.完备的监控功能:提供实时的监">
  
    <link rel="alternate" href="/atom.xml" title="Rocky for Everything" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Rocky for Everything</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">慢慢喜欢你</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Sentinel系列之起源" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/28/Sentinel系列之起源/" class="article-date">
  <time datetime="2018-08-28T01:24:02.000Z" itemprop="datePublished">2018-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Sentinel系列之起源
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-什么是Sentinel"><a href="#1-什么是Sentinel" class="headerlink" title="1.什么是Sentinel"></a>1.什么是Sentinel</h2><blockquote>
<p>i.分布式系统的流量防卫兵；<br><br>ii.微服务架构中，服务与服务之间的稳定性变得越来越重要。Sentinel以流量为切入点，从流控，熔断，降级，系统负载保护等多个维度来提供服务稳定性支持；<br>iii.轻量级。</p>
</blockquote>
<h2 id="2-Sentinel功能"><a href="#2-Sentinel功能" class="headerlink" title="2.Sentinel功能"></a>2.Sentinel功能</h2><blockquote>
<p>i.流控，针对秒杀环境，对于突发流量可以控制在系统承受范围内；<br><br>ii.削峰填谷;<br><br>iii.实时熔断下游不可用应用;<br><br>iv.完备的监控功能:提供实时的监控功能，可以精确到秒级数据；<br><br>v.Sentinel提供简易的扩展点，快速定制逻辑，例如定制规则管理，适配数据源。</p>
</blockquote>
<h2 id="3-核心架构"><a href="#3-核心架构" class="headerlink" title="3.核心架构"></a>3.核心架构</h2><pre><code>核心库:不依赖任何框架/库，能够运行于所有java运行时环境，对Dubbo/Spring Cloud等框架有较好的支持。
控制台:基于SpringBoot开发，打包后直接运行，不需要额外的Tomcat应用容器。
</code></pre><h2 id="4-基本概念"><a href="#4-基本概念" class="headerlink" title="4.基本概念"></a>4.基本概念</h2><h3 id="4-1-资源"><a href="#4-1-资源" class="headerlink" title="4.1 资源"></a>4.1 资源</h3><ol>
<li>资源是Sentinel的关键概念，可以是APP中的任意内容。如由应用程序提供的服务，或者由应用程序调用的其他应用提供的服务，或者一段代码。</li>
<li>只要通过Sentinel API定义的代码就是资源，能够被Sentinel保护起来。通常使用方法签名，URL，甚至服务名称作为资源名来标识资源。<h3 id="4-2-规则"><a href="#4-2-规则" class="headerlink" title="4.2 规则"></a>4.2 规则</h3>围绕资源的实时状态设定的规则，可以包括流量控制规则，熔断降级规则以及系统保护规则。所有规则可以动态实时调整。</li>
</ol>
<h2 id="5-Sentinel功能合设计理念"><a href="#5-Sentinel功能合设计理念" class="headerlink" title="5.Sentinel功能合设计理念"></a>5.Sentinel功能合设计理念</h2><h3 id="5-1-流量控制"><a href="#5-1-流量控制" class="headerlink" title="5.1 流量控制"></a>5.1 流量控制</h3><p><strong>1.</strong> <strong>什么是流量控制</strong></p>
<blockquote>
<p>流控是网络传输中的常用概念，用于调整网络包的发送数据。<br><br>流控的目的是从系统的稳定性角度来考虑的，在处理请求的速度上，有很多讲究。<br><br>任意时间到来的请求是随机不可控的，但是系统的处理能力有限，需要根据系统的能力进行流控。<br><br>Sentinel作为一个适配器，可以根据需要把随机请求调整成合适的形状。<br></p>
</blockquote>
<p><strong>2.流控设计理念</strong><br></p>
<blockquote>
<p>资源的调用关系，例如资源的调用链路，资源和资源之间的关系。<br><br>运行指标，如QPS,线程池,系统负载等。<br><br>控制效果，如直接限流，冷启动，排队等。<br><br><strong>Sentinel的设计理念是，自由选择控制的角度，进行灵活组合，达到想要的效果。</strong></p>
</blockquote>
<h3 id="5-2-熔断降级"><a href="#5-2-熔断降级" class="headerlink" title="5.2 熔断降级"></a>5.2 熔断降级</h3><p><strong>1.什么是熔断降级</strong></p>
<blockquote>
<p>核心还是保护系统稳定性，降低调用链路中的不稳定资源。由于调用关系的复杂性，如果链路中的部分资源不稳定，最终会导致请求发生堆积。<br><br>Sentinel和Hystrix原则一致：当调用链路中某个资源出现不稳定，例如表现timeout，异常比例升高的时候，则对这个资源调用进行限制，<strong>让某个请求快速失败</strong>，避免影响到其他资源，最终产生雪崩的效果。<br></p>
</blockquote>
<p><strong>2.熔断降级的设计理念</strong></p>
<blockquote>
<ul>
<li>限制手段上，Sentinel和HyStrix采取不同的方法；HyStrix通过线程池的方式，来依赖(在我们的概念中对应资源)进行了隔离。这样的好处是对资源和资源之间进行彻底的隔离。缺点是增加了线程切换的成本，还需要预留资源给各个线程池大小的分配。<br></li>
<li>Sentinel对于这个问题采用了两种手段：<br><ol>
<li>通过并发线程数进行限制:通过限制资源并发线程数量，来减少不稳定资源对其他资源的影响，这样没有线程切换的损耗，也不需要预先分配线程池的大小。当某个资源出现不稳定的情况下，如响应时间变长，对资源的直接影响是会造成线程数的逐步堆积。当线程数在特定资源上堆积到一定数量之后，该资源的新请求就会被拒绝，堆积的线程完成后才开始接收请求。</li>
<li>通过响应时间对资源进行降级：除了对并发线程数进行控制意外，Sentinel还可以通过响应时间来快速降级不稳定资源，当依赖的资源出现响应时间过长后，所有对该资源的访问都会被直接拒绝，直到过了指定时间窗口后才重新恢复。</li>
</ol>
</li>
</ul>
</blockquote>
<h2 id="5-3-系统的过载保护"><a href="#5-3-系统的过载保护" class="headerlink" title="5.3 系统的过载保护"></a>5.3 系统的过载保护</h2><pre><code>系统入口流量和系统的负载达到一个平衡，保证系统在能力范围之内处理更多的请求。
</code></pre><h2 id="6-Sentinel是如何工作的"><a href="#6-Sentinel是如何工作的" class="headerlink" title="6.Sentinel是如何工作的"></a>6.Sentinel是如何工作的</h2><pre><code>1. 对主流框架提供适配或者显示的API，来定义需要保护的资源，并提供设施对资源进行实时统计和调用链路分析。
2. 根据预设的规则，结合对资源的实时统计信息，对流量进行控制。同时，Sentinel提供开放的接口，方便定义和改变规则。
3. Sentinel提供实时的监控系统，方便快速了解当前系统的状态。 
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/28/Sentinel系列之起源/" data-id="cjne6ewd8000g9gzj7g0vofko" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sentinel系列/">Sentinel系列</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/28/微服务系列之源初/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          微服务系列之源初
        
      </div>
    </a>
  
  
    <a href="/2018/08/20/Druid源码解析之数据库连接池总论/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Druid源码解析之数据库连接池总论</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Druid/">Druid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Druid-SQL解析/">Druid SQL解析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Druid-数据库连接池/">Druid 数据库连接池</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dubbo-SPI/">Dubbo SPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RocketMQ/">RocketMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sentinel系列/">Sentinel系列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SofaRPC/">SofaRPC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringAOP/">SpringAOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud-微服务/">SpringCloud 微服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/">SpringMVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/">Zookeeper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netty/">netty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微服务设计读书笔记/">微服务设计读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/消息队列/">消息队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/秒杀/">秒杀</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络-网络层/">计算机网络 网络层</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跳表-SkipList/">跳表 SkipList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高并发/">高并发</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Druid/" style="font-size: 10px;">Druid</a> <a href="/tags/Druid-SQL解析/" style="font-size: 10px;">Druid SQL解析</a> <a href="/tags/Druid-数据库连接池/" style="font-size: 10px;">Druid 数据库连接池</a> <a href="/tags/Dubbo-SPI/" style="font-size: 10px;">Dubbo SPI</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/RocketMQ/" style="font-size: 10px;">RocketMQ</a> <a href="/tags/Sentinel系列/" style="font-size: 10px;">Sentinel系列</a> <a href="/tags/SofaRPC/" style="font-size: 10px;">SofaRPC</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/SpringAOP/" style="font-size: 10px;">SpringAOP</a> <a href="/tags/SpringCloud-微服务/" style="font-size: 10px;">SpringCloud 微服务</a> <a href="/tags/SpringMVC/" style="font-size: 10px;">SpringMVC</a> <a href="/tags/Zookeeper/" style="font-size: 10px;">Zookeeper</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/k8s/" style="font-size: 20px;">k8s</a> <a href="/tags/netty/" style="font-size: 10px;">netty</a> <a href="/tags/微服务设计读书笔记/" style="font-size: 10px;">微服务设计读书笔记</a> <a href="/tags/消息队列/" style="font-size: 20px;">消息队列</a> <a href="/tags/秒杀/" style="font-size: 10px;">秒杀</a> <a href="/tags/算法/" style="font-size: 10px;">算法</a> <a href="/tags/计算机网络/" style="font-size: 10px;">计算机网络</a> <a href="/tags/计算机网络-网络层/" style="font-size: 10px;">计算机网络 网络层</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/跳表-SkipList/" style="font-size: 10px;">跳表 SkipList</a> <a href="/tags/高并发/" style="font-size: 10px;">高并发</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/10/11/Netty系列之Netty实战读书笔记/">Netty系列之Netty实战读书笔记</a>
          </li>
        
          <li>
            <a href="/2018/10/10/docker系列之doker核心原理解读/">docker系列之doker核心原理解读</a>
          </li>
        
          <li>
            <a href="/2018/10/08/docker系列深入篇/">docker系列深入篇</a>
          </li>
        
          <li>
            <a href="/2018/09/29/Netty系列之netty体系和概念/">Netty系列之netty体系和概念</a>
          </li>
        
          <li>
            <a href="/2018/09/29/k8s系列之k8s核心原理/">k8s系列之k8s核心原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Rocky ZhouJin QQ987415811<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>